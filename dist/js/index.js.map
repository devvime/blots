{
  "version": 3,
  "sources": ["../../src/router.js", "../../src/blots.js", "../../src/state.js", "../../src/component.html", "../../src/index.js"],
  "sourcesContent": ["export class Router {\n  constructor() {\n    this.routes = [];\n\n    window.addEventListener('popstate', () => this.resolve());\n    this.setDataLink();\n  }\n\n  add(path, callback) {\n    this.routes.push({ path, callback });\n  }\n\n  navigate(path) {\n    history.pushState({}, '', path);\n    document.querySelector('app').innerHTML = ''\n    this.resolve();\n  }\n\n  setDataLink() {\n    document.querySelectorAll('a[data-link]').forEach(el => {\n      el.addEventListener('click', (e) => {\n        e.preventDefault();\n        const target = e.currentTarget.getAttribute('href');\n        if (target) this.navigate(target);\n      });\n    });\n  }\n\n  resolve() {\n    const currentPath = window.location.pathname;\n    const query = this.parseQueryParams(window.location.search);\n    for (const route of this.routes) {\n      const match = this.matchPath(route.path, currentPath);\n      if (match) {\n        route.callback(match, query);\n        return;\n      }\n    }\n    console.warn('No route matched:', currentPath);\n  }\n\n  matchPath(routePath, currentPath) {\n    const routeParts = routePath.split('/').filter(Boolean);\n    const pathParts = currentPath.split('/').filter(Boolean);\n\n    if (routeParts.length !== pathParts.length) return null;\n\n    const params = {};\n\n    for (let i = 0; i < routeParts.length; i++) {\n      const routePart = routeParts[i];\n      const pathPart = pathParts[i];\n\n      if (routePart.startsWith(':')) {\n        params[routePart.substring(1)] = decodeURIComponent(pathPart);\n      } else if (routePart !== pathPart) {\n        return null;\n      }\n    }\n\n    return params;\n  }\n\n  parseQueryParams(search) {\n    const query = {};\n    const params = new URLSearchParams(search);\n    params.forEach((value, key) => {\n      query[key] = value;\n    });\n    return query;\n  }\n}\n", "export default function blots(rootSelector, data, methods) {\n  const root = document.querySelector(rootSelector);\n\n  function parseBindings(node) {\n    if (node.nodeType === 3) {\n      // Text Node\n      const matches = node.textContent.match(/{{\\s*[\\w.]+\\s*}}/g);\n      if (matches) {\n        matches.forEach((match) => {\n          const key = match.replace(/[{}]/g, \"\").trim();\n          const value = getValueFromData(key);\n          node.textContent = node.textContent.replace(match, value ?? \"\");\n        });\n      }\n    }\n\n    if (node.nodeType === 1) {\n      // Element\n      [...node.attributes].forEach((attr) => {\n        const name = attr.name;\n        const value = attr.value;\n\n        if (name === \"@click\") {\n          node.addEventListener(\"click\", methods[value]);\n        }\n\n        if (name === \"@change\") {\n          node.addEventListener(\"change\", (e) => {\n            if (methods[value]) methods[value](e);\n          });\n        }\n\n        if (name === \"@input\") {\n          node.addEventListener(\"input\", (e) => {\n            if (methods[value]) methods[value](e);\n          });\n        }\n\n        if (name === \"@value\") {\n          node.value = getValueFromData(value) ?? \"\";\n        }\n\n        if (name === \"@model\") {\n          node.value = getValueFromData(value) ?? \"\";\n          node.addEventListener(\"input\", (e) => {\n            data[value] = e.target.value;\n            const name = e.target.getAttribute(\"@name\");\n            document.querySelector(`[\\\\@name=\"${name}\"]`).focus();\n          });\n        }\n\n        if (name === \"@if\") {\n          if (!getValueFromData(value)) {\n            node.remove();\n          }\n        }\n\n        if (name === \"@else\") {\n          if (getValueFromData(value)) {\n            node.remove();\n          }\n        }\n\n        if (name === \"@for\") {\n          const [itemName, , listName] = value.split(\" \");\n          const list = getValueFromData(listName);\n          if (Array.isArray(list)) {\n            const parent = node.parentElement;\n            list.forEach((item) => {\n              const clone = node.cloneNode(true);\n              clone.removeAttribute(\"@for\");\n              clone.innerHTML = clone.innerHTML.replace(\n                new RegExp(`{{\\\\s*${itemName}\\\\s*}}`, \"g\"),\n                item\n              );\n              parent.insertBefore(clone, node);\n            });\n            node.remove();\n          }\n        }\n\n        if (name === \"@class\") {\n          try {\n            const classMap = parseClassMap(value, data);\n            for (const className in classMap) {\n              const resolved = classMap[className];\n              if (resolved) {\n                node.classList.add(className);\n              } else {\n                node.classList.remove(className);\n              }\n            }\n          } catch (e) {\n            console.error(\"Error when interpreting @class:\", e);\n          }\n        }\n      });\n    }\n\n    [...node.childNodes].forEach((child) => parseBindings(child));\n  }\n\n  function getValueFromData(key) {\n    const parts = key.split(\".\");\n    let val = data;\n    for (const part of parts) {\n      if (val && typeof val === \"object\") {\n        val = val[part];\n      } else {\n        return undefined;\n      }\n    }\n    return val;\n  }\n\n  parseBindings(root);\n}\n\nfunction parseClassMap(str, data) {\n  const result = {};\n  const objectBody = str.trim().slice(1, -1);\n  const pairs = objectBody.split(\",\").map((p) => p.trim());\n\n  for (const pair of pairs) {\n    const [rawKey, rawExpr] = pair.split(\":\").map((s) => s.trim());\n    const key = rawKey.replace(/^[\"']|[\"']$/g, \"\");\n\n    try {\n      const fn = new Function(\"data\", `with(data) { return (${rawExpr}) }`);\n      result[key] = fn(data);\n    } catch (e) {\n      console.warn(`Erro ao avaliar express\u00E3o para @class: ${rawExpr}`, e);\n    }\n  }\n\n  return result;\n}\n", "export function state(obj, onChange) {\n  return new Proxy(obj, {\n    set(target, prop, value) {\n      target[prop] = value;\n      if (typeof onChange === \"function\") onChange({ prop, value, target });\n      return true;\n    },\n  });\n}\n\nexport function observable() {\n  const observers = new Set();\n  return {\n    subscribe: (observer) => observers.add(observer),\n    unsubscribe: (observer) => observers.delete(observer),\n    notify: (data) => observers.forEach((observer) => observer(data)),\n  };\n}\n", "<h1>{{ title }}</h1>\n\n<input type=\"text\" @change=\"updateTitle\" />\n\n<button @click=\"sayHello\">Clique aqui</button>\n<button @click=\"testIf\">Test if</button>\n\n<ul>\n    <li @for=\"item in items\">{{ item }}</li>\n</ul>\n\n<p @if=\"showMessage\">Mensagem vis\u00EDvel</p>\n\n<button @click=\"toggle\" @class=\"{ active: isActive }\">\n    <span @if=\"isActive\">Desativar</span>\n    <span @else=\"isActive\">Ativar</span>\n</button>\n\n<input type=\"text\" @model=\"name\" @name=\"inputName\">\n<input type=\"text\" @model=\"title\" @name=\"inputTitle\">\n<p>Ol\u00E1, {{ name }}!</p>", "import { Router } from \"./router.js\";\nimport blots from \"./blots.js\";\nimport { state } from \"./state.js\";\n\nimport template from \"./component.html\";\n\nconst router = new Router();\n\nrouter.add(\"/\", async () => {\n  const data = state(\n    {\n      name: \"Victor\",\n      title: \"Ol\u00E1 mundo!\",\n      showMessage: true,\n      items: [\"Ma\u00E7\u00E3\", \"Banana\", \"Laranja\"],\n      isActive: false,\n      methods: {\n        sayHello: () => alert(\"Ol\u00E1!\"),\n        testIf: () => {\n          data.showMessage = !data.showMessage;\n        },\n        updateTitle: (e) => {\n          data.items = [...data.items, e.target.value];\n        },\n        toggle: () => {\n          data.isActive = !data.isActive;\n        },\n      },\n    },\n    () => {\n      document.querySelector(\"app\").innerHTML = template;\n      blots(\"app\", data, data.methods);\n    }\n  );\n\n  document.querySelector(\"app\").innerHTML = template;\n  blots(\"app\", data, data.methods);\n});\n\nrouter.add(\"/user/:id/:name\", (params, query) => {\n  console.log(\"Params:\", params);\n  console.log(\"Query:\", query);\n});\n\nrouter.resolve();\n"],
  "mappings": "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",
  "names": ["Router", "init_router", "__esmMin", "path", "callback", "el", "e", "target", "currentPath", "query", "route", "match", "routePath", "routeParts", "pathParts", "params", "i", "routePart", "pathPart", "search", "value", "key", "blots", "rootSelector", "data", "methods", "root", "parseBindings", "node", "matches", "match", "key", "value", "getValueFromData", "attr", "_a", "_b", "name", "e", "itemName", "listName", "list", "parent", "item", "clone", "classMap", "parseClassMap", "className", "child", "parts", "val", "part", "str", "result", "pairs", "p", "pair", "rawKey", "rawExpr", "s", "fn", "init_blots", "__esmMin", "state", "obj", "onChange", "target", "prop", "value", "init_state", "__esmMin", "component_default", "init_component", "__esmMin", "require_index", "__commonJSMin", "exports", "init_router", "init_blots", "init_state", "init_component", "router", "Router", "__async", "data", "state", "e", "component_default", "blots", "params", "query"]
}
