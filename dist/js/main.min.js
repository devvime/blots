(()=>{var M=Object.defineProperty;var L=(s,t,e)=>t in s?M(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var i=(s,t,e)=>L(s,typeof t!="symbol"?t+"":t,e);var g=class{constructor(){this.routes=[],window.addEventListener("popstate",()=>this.resolve()),this.setDataLink()}add(t,e){this.routes.push({path:t,callback:e})}navigate(t){history.pushState({},"",t),document.querySelector("app").innerHTML="",this.resolve()}setDataLink(){document.querySelectorAll("[data-link]").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),e.target.style.cursor="pointer";let r=e.currentTarget.getAttribute("data-link");r&&this.navigate(r)})})}resolve(){let t=window.location.pathname,e=this.parseQueryParams(window.location.search);for(let r of this.routes){let a=this.matchPath(r.path,t);if(a){let n=r.callback(a,e);n!=null&&n.render&&n.render();return}}history.pushState({},"","/404"),document.querySelector("app").innerHTML=""}matchPath(t,e){let r=t.split("/").filter(Boolean),a=e.split("/").filter(Boolean);if(r.length!==a.length)return null;let n={};for(let o=0;o<r.length;o++){let l=r[o],c=a[o];if(l.startsWith(":"))n[l.substring(1)]=decodeURIComponent(c);else if(l!==c)return null}return n}parseQueryParams(t){let e={};return new URLSearchParams(t).forEach((a,n)=>{e[n]=a}),e}};function p(s,t){let e=t.split("."),r=s;for(let a of e)if(r&&typeof r=="object")r=r[a];else return;return r}function v(s,t){if(t.nodeType===3){let e=t.textContent.match(/{{\s*[\w.]+\s*}}/g);e&&e.forEach(r=>{let a=r.replace(/[{}]/g,"").trim(),n=p(s,a);t.textContent=t.textContent.replace(r,n!=null?n:"")})}}function y(s,t,e){let r=t.split("."),a=s;for(let n=0;n<r.length-1;n++){let o=r[n];o in a||(a[o]={}),a=a[o]}a[r[r.length-1]]=e,s.refresh_at=new Date().getMilliseconds()}function x(s,t){let e={},a=s.trim().slice(1,-1).split(",").map(n=>n.trim());for(let n of a){let[o,l]=n.split(":").map(m=>m.trim()),c=o.replace(/^["']|["']$/g,"");try{let m=new Function("data",`with(data) { return (${l}) }`);e[c]=m(t)}catch(m){console.warn(`Erro ao avaliar express\xE3o para @class: ${l}`,m)}}return e}function b(s,t,e,r){s.nodeType===1&&[...s.attributes].forEach(a=>{let n=a.name,o=a.value;n==="@click"&&s.addEventListener("click",e[o]),n==="@change"&&C(s,e,o),n==="@input"&&A(s,e),n==="@value"&&q(s,t,o),n==="@model"&&T(s,t,o),n==="@if"&&P(s,t,o),n==="@else"&&S(s,t,o),n==="@for"&&H(s,t,o),n==="@class"&&N(s,o,t)}),[...s.childNodes].forEach(a=>r(a))}function C(s,t,e){s.addEventListener("change",r=>{t[e]&&t[e](r)})}function A(s,t){s.addEventListener("input",e=>{t[value]&&t[value](e)})}function q(s,t,e){var r;s.value=(r=p(t,e))!=null?r:""}function T(s,t,e){var r;s.value=(r=p(t,e))!=null?r:"",s.addEventListener("input",a=>{y(t,e,a.target.value);let n=a.target.getAttribute("@name");document.querySelector(`[\\@name="${n}"]`).focus()})}function P(s,t,e){p(t,e)||s.remove()}function S(s,t,e){p(t,e)&&s.remove()}function H(s,t,e){let[r,,a]=e.split(" "),n=p(t,a);if(Array.isArray(n)){let o=s.parentElement;n.forEach(l=>{let c=s.cloneNode(!0);c.removeAttribute("@for"),c.innerHTML=c.innerHTML.replace(new RegExp(`{{\\s*${r}\\s*}}`,"g"),l),o.insertBefore(c,s)}),s.remove()}}function N(s,t,e){try{let r=x(t,e);for(let a in r)r[a]?s.classList.add(a):s.classList.remove(a)}catch(r){console.error("Error when interpreting @class:",r)}}function w(s,t,e){let r=document.querySelector(s);function a(n){v(t,n),b(n,t,e,a)}a(r)}function E(s,t){return new Proxy(s,{set(e,r,a){return e[r]=a,typeof t=="function"&&t({prop:r,value:a,target:e}),!0}})}var u=class{constructor(t={},e={}){i(this,"component",{});i(this,"target","app");i(this,"template","");i(this,"params",{});i(this,"query",{});i(this,"componentChilds",[]);this.params=t,this.query=e,this.component=E({},()=>{this.render()}),this.component.navigate=r=>this.navigate(r),this.init(),document.addEventListener("DOMContentLoaded",()=>{this.render()})}init(){}setData(t={}){Object.keys(t).forEach(e=>{this.component[e]=t[e]})}getData(t){return this.component[t]}setMethods(t={}){Object.keys(t).forEach(e=>{this.component[e]=t[e]})}addComponent(t,e=[]){this.componentChilds.push(new t(this.params,this.query,e))}navigate(t){h.navigate(t.target.getAttribute("data-path"))}render(){document.querySelector(this.target)&&(document.querySelector(this.target).innerHTML=this.template,w(this.target,this.component,this.component)),this.componentChilds.forEach(t=>{t.render()})}};var D=`<nav></nav>

<h1>{{ title }}</h1>

<input type="text" @change="updateTitle" />

<button @click="sayHello">Clique aqui</button>
<button @click="testIf">Test if</button>

<ul>
    <li @for="item in items">{{ item }}</li>
</ul>

<p @if="showMessage">Mensagem vis\xEDvel</p>

<button @click="toggle" @class="{ active: isActive }">
    <span @if="isActive">Desativar</span>
    <span @else="isActive">Ativar</span>
</button>

<input type="text" @model="name" @name="inputName">
<input type="text" @model="title" @name="inputTitle">
<input type="text" @model="user.name" @name="inputUserName">

<p>Ol\xE1, {{ name }}!</p>

<p>User name: {{ user.name }}</p>
<p>Address: street: {{ user.address.street }}</p>`;var k=`<a @click="navigate" data-path="/">Home</a>
<a @click="navigate" data-path="/user/10/steve?test=true">Users</a>`;var f=class extends u{constructor(e,r){super(e,r);i(this,"target","nav");i(this,"template",k)}init(){this.setData({}),this.setMethods({})}};var d=class extends u{constructor(e,r){super(e,r);i(this,"target","app");i(this,"template",D)}init(){this.setData({name:"Steve",title:"Hello World!",showMessage:!0,items:["Cup","Book","Game"],isActive:!1,user:{name:"CJ",address:{street:"Groove street"}}}),this.setMethods({sayHello:()=>alert("Ol\xE1!"),testIf:()=>this.testIf(),updateTitle:e=>this.updateTitle(e),toggle:()=>this.toggle()}),this.addComponent(f)}testIf(){this.setData({showMessage:!this.getData("showMessage")})}updateTitle(e){this.setData({items:[...this.getData("items"),e.target.value]})}toggle(){this.setData({isActive:!this.getData("isActive")})}};var h=new g;h.add("/",(s,t)=>new d(s,t));h.add("/user/:id/:name",(s,t)=>{console.log("Params:",s),console.log("Query:",t)});h.resolve();})();
//# sourceMappingURL=main.min.js.map
